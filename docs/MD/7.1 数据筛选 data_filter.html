
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>7.1 EMP_filter · Bingdong Liu</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="Bingdong Liu">
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-pageview-count/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-prism/prism-tomorrow.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-back-to-top-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-auto-scroll-table/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-chapter-fold/chapter-fold.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    

        
    
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="7.2 数据历史 EMP_history.html" />
    
    
    <link rel="prev" href="7 data support.html" />
    

    
        <link rel="shortcut icon" href='../assets/favicon.ico' type="image/x-icon">
    
    
        <link rel="bookmark" href='../assets/favicon.ico' type="image/x-icon">
    
    
        <link rel="apple-touch-icon" href='../assets/favicon.ico'>
    
    
        
        <link rel="apple-touch-icon" sizes="120x120" href="../assets/favicon.ico">
        
        <link rel="apple-touch-icon" sizes="180x180" href="../assets/favicon.ico">
        
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://github.com/liubingdong/EasyMultiProfiler" target="_blank" class="custom-link">EasyMultiProfiler</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Tutorial
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1" data-path="1 EasyMultiProfiler初识.html">
            
                <a href="1 EasyMultiProfiler初识.html">
            
                    
                    Chapter 1 Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.1.1" data-path="1 EasyMultiProfiler初识.html">
            
                <a href="1 EasyMultiProfiler初识.html#11">
            
                    
                    1.1 Installation and update
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.1.2" data-path="1 EasyMultiProfiler初识.html">
            
                <a href="1 EasyMultiProfiler初识.html#12">
            
                    
                    1.2 basic information
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.1.2" data-path="2 创建MAE对象.html">
            
                <a href="2 创建MAE对象.html">
            
                    
                    Chapter 2 Import data
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.2.1" data-path="2 创建MAE对象.html">
            
                <a href="2 创建MAE对象.html#21">
            
                    
                    2.1 Multi-omics data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.2.2" data-path="2 创建MAE对象.html">
            
                <a href="2 创建MAE对象.html#22">
            
                    
                    2.2 Single-omics data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.2.3" data-path="2 创建MAE对象.html">
            
                <a href="2 创建MAE对象.html#23">
            
                    
                    2.3 Save and load data
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.1.3" data-path="3 EasyMultiProfiler内置示例MAE对象.html">
            
                <a href="3 EasyMultiProfiler内置示例MAE对象.html">
            
                    
                    Chapter 3 Demo data
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.3.1" data-path="3 EasyMultiProfiler内置示例MAE对象.html">
            
                <a href="3 EasyMultiProfiler内置示例MAE对象.html#31">
            
                    
                    3.1 Load MAE 
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.3.2" data-path="3 EasyMultiProfiler内置示例MAE对象.html">
            
                <a href="3 EasyMultiProfiler内置示例MAE对象.html#32">
            
                    
                    3.2 Summary MAE
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.1.4" data-path="4 数据提取 Data Extract.html">
            
                <a href="4 数据提取 Data Extract.html">
            
                    
                    Chapter 4 Data Extract
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.4.1" data-path="4 数据提取 Data Extract.html">
            
                <a href="4 数据提取 Data Extract.html#41">
            
                    
                    4.1 EMP_assay_extract
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.4.2" data-path="4 数据提取 Data Extract.html">
            
                <a href="4 数据提取 Data Extract.html#42">
            
                    
                    4.2 EMP_rowdata_extract
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.4.3" data-path="4 数据提取 Data Extract.html">
            
                <a href="4 数据提取 Data Extract.html#43">
            
                    
                    4.3 EMP_coldata_extract
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.1.5" data-path="5 数据预处理 Data Preparetion.html">
            
                <a href="5 数据预处理 Data Preparetion.html">
            
                    
                    Chapter 5 Data Preparation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.5.1" data-path="5.1 数据折叠 EMP_collapse.html">
            
                <a href="5.1 数据折叠 EMP_collapse.html">
            
                    
                    5.1 EMP_collapse
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.5.2" data-path="5.2 批次校正 EMP_adjust_abudance.html">
            
                <a href="5.2 批次校正 EMP_adjust_abudance.html">
            
                    
                    5.2 EMP_adjust_abudance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.5.3" data-path="5.3 实验数据的特征转换 EMP_feature_convert.html">
            
                <a href="5.3 实验数据的特征转换 EMP_feature_convert.html">
            
                    
                    5.3 EMP_feature_convert
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.5.4" data-path="5.4 数据标准化 EMP_decostand.html">
            
                <a href="5.4 数据标准化 EMP_decostand.html">
            
                    
                    5.4 EMP_decostand
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.5.5" data-path="5.5 数据插补 EMP_impute.html">
            
                <a href="5.5 数据插补 EMP_impute.html">
            
                    
                    5.5 EMP_impute
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.5.6" data-path="5.6 确定核心数据 EMP_identify_assay.html">
            
                <a href="5.6 确定核心数据 EMP_identify_assay.html">
            
                    
                    5.6 EMP_identify_assay
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.5.7" data-path="5.7 调整数据 EMP_modify_assay.html">
            
                <a href="5.7 调整数据 EMP_modify_assay.html">
            
                    
                    5.7 EMP_modify_assay
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.5.8" data-path="5.8 数据重抽样 EMP_rrarefy.html">
            
                <a href="5.8 数据重抽样 EMP_rrarefy.html">
            
                    
                    5.8 EMP_rrarefy
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.1.6" data-path="6 数据分析 Data Analysis.html">
            
                <a href="6 数据分析 Data Analysis.html">
            
                    
                    Chapter 6 Data Analysis
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.6.1" data-path="6.1 α多样性分析 EMP_alpha_analysis.html">
            
                <a href="6.1 α多样性分析 EMP_alpha_analysis.html">
            
                    
                    6.1 EMP_alpha_analysis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.6.2" data-path="6.2 聚类分析 EMP_cluster_analysis.html">
            
                <a href="6.2 聚类分析 EMP_cluster_analysis.html">
            
                    
                    6.2 EMP_cluster_analysis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.6.3" data-path="6.3 相关性分析 EMP_cor_analysis.html">
            
                <a href="6.3 相关性分析 EMP_cor_analysis.html">
            
                    
                    6.3 EMP_cor_analysis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.6.4" data-path="6.4 差异性分析 EMP_diff_analysis.html">
            
                <a href="6.4 差异性分析 EMP_diff_analysis.html">
            
                    
                    6.4 EMP_diff_analysis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.6.5" data-path="6.5 降维分析 EMP_dimension_analysis.html">
            
                <a href="6.5 降维分析 EMP_dimension_analysis.html">
            
                    
                    6.5 EMP_dimension_analysis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.6.6" data-path="6.6 富集分析 EMP_enrich_analysis.html">
            
                <a href="6.6 富集分析 EMP_enrich_analysis.html">
            
                    
                    6.6 EMP_enrich_analysis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.6.7" data-path="6.7 标志物分析 EMP_marker_analysis.html">
            
                <a href="6.7 标志物分析 EMP_marker_analysis.html">
            
                    
                    6.7 EMP_marker_analysis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.6.8" data-path="6.8 GSEA富集分析 EMP_GSEA_analysis.html">
            
                <a href="6.8 GSEA富集分析 EMP_GSEA_analysis.html">
            
                    
                    6.8 EMP_GSEA_analysis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.6.9" data-path="6.9 EMP_WGCNA_cluster_analysis.html">
            
                <a href="6.9 EMP_WGCNA_cluster_analysis.html">
            
                    
                    6.9 EMP_WGCNA_cluster_analysis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.6.10" data-path="6.10 EMP_WGCNA_cor_analysis.html">
            
                <a href="6.10 EMP_WGCNA_cor_analysis.html">
            
                    
                    6.10 EMP_WGCNA_cor_analysis
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.6.11" data-path="6.11 联合分析 EMP_multi_analysis.html">
            
                <a href="6.11 联合分析 EMP_multi_analysis.html">
            
                    
                    6.11 EMP_multi_analysis
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.1.7" data-path="7 data support.html">
            
                <a href="7 data support.html">
            
                    
                    Chapter 7 Data support
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.1.7.1" data-path="7.1 数据筛选 data_filter.html">
            
                <a href="7.1 数据筛选 data_filter.html">
            
                    
                    7.1 EMP_filter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.7.2" data-path="7.2 数据历史 EMP_history.html">
            
                <a href="7.2 数据历史 EMP_history.html">
            
                    
                    7.2 EMP_history
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.7.3" data-path="7.3 数据结果提取和注入 EMP_result.html">
            
                <a href="7.3 数据结果提取和注入 EMP_result.html">
            
                    
                    7.3 EMP_result
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.7.4" data-path="7.4 数据概览 EMP_summary.html">
            
                <a href="7.4 数据概览 EMP_summary.html">
            
                    
                    7.4 EMP_summary
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.7.5" data-path="7.5 物种数据导入 EMP_taxonomy_import.html">
            
                <a href="7.5 物种数据导入 EMP_taxonomy_import.html">
            
                    
                    7.5 EMP_taxonomy_import
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.7.6" data-path="7.6 功能数据导入 EMP_function_import.html">
            
                <a href="7.6 功能数据导入 EMP_function_import.html">
            
                    
                    7.6 EMP_function_import
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.7.7" data-path="7.7 标准数据导入 EMP_normal_import.html">
            
                <a href="7.7 标准数据导入 EMP_normal_import.html">
            
                    
                    7.7 EMP_normal_import
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.7.8" data-path="7.8 快捷数据导入 EMP_easy_import.html">
            
                <a href="7.8 快捷数据导入 EMP_easy_import.html">
            
                    
                    7.8 EMP_easy_import
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.1.8" data-path="8 data virtualization.html">
            
                <a href="8 data virtualization.html">
            
                    
                    Chapter 8 Data Virtualization
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.8.1" data-path="8.1 箱型图 EMP_boxplot.html">
            
                <a href="8.1 箱型图 EMP_boxplot.html">
            
                    
                    8.1 EMP_boxplot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.8.2" data-path="8.2 散点图 EMP_scatterplot.html">
            
                <a href="8.2 散点图 EMP_scatterplot.html">
            
                    
                    8.2 EMP_scatterplot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.8.3" data-path="8.3 富集点状图 EMP_dotplot.html">
            
                <a href="8.3 富集点状图 EMP_dotplot.html">
            
                    
                    8.3 EMP_dotplot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.8.4" data-path="8.4 富集网络图 EMP_netplot.html">
            
                <a href="8.4 富集网络图 EMP_netplot.html">
            
                    
                    8.4 EMP_netplot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.8.5" data-path="8.5 双变量拟合图 EMP_fitline_plot.html">
            
                <a href="8.5 双变量拟合图 EMP_fitline_plot.html">
            
                    
                    8.5 EMP_fitline_plot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.8.6" data-path="8.6 富集曲线图 EMP_curveplot.html">
            
                <a href="8.6 富集曲线图 EMP_curveplot.html">
            
                    
                    8.6 EMP_curveplot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.8.7" data-path="8.7 热图 EMP_heatmap_plot.html">
            
                <a href="8.7 热图 EMP_heatmap_plot.html">
            
                    
                    8.7EMP_heatmap_plot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.8.8" data-path="8.8 桑基图 EMP_sankey_plot.html">
            
                <a href="8.8 桑基图 EMP_sankey_plot.html">
            
                    
                    8.8 EMP_sankey_plot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.8.9" data-path="8.9 结构柱状图 EMP_structure_plot.html">
            
                <a href="8.9 结构柱状图 EMP_structure_plot.html">
            
                    
                    8.9 EMP_structure_plot
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.8.10" data-path="8.10 火山图 EMP_volcanol_plot.html">
            
                <a href="8.10 火山图 EMP_volcanol_plot.html">
            
                    
                    8.10 EMP_volcanol_plot
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.1.9" data-path="9 更多有用函数.html">
            
                <a href="9 更多有用函数.html">
            
                    
                    Chapter 9 More Useful Tools
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.9.1" data-path="9 更多有用函数.html">
            
                <a href="9 更多有用函数.html#91">
            
                    
                    9.1 CorRcpp
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.9.2" data-path="9 更多有用函数.html">
            
                <a href="9 更多有用函数.html#92">
            
                    
                    9.2 str_detect_multi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.9.3" data-path="9 更多有用函数.html">
            
                <a href="9 更多有用函数.html#93">
            
                    
                    9.3 EMP_to_EMP1
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.1.10" data-path="10 示例教程.html">
            
                <a href="10 示例教程.html">
            
                    
                    Chapter 10 More Examples
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1.10.1" data-path="10.1 表型数据重分组.html">
            
                <a href="10.1 表型数据重分组.html">
            
                    
                    10.1 Meta data modified
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.10.2" data-path="10.2 实验数据快速处理.html">
            
                <a href="10.2 实验数据快速处理.html">
            
                    
                    10.2 Experiment data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.10.3" data-path="10.3 配对队列的处理方案.html">
            
                <a href="10.3 配对队列的处理方案.html">
            
                    
                    10.3 Paired test and intervention corhort
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.1.10.4" data-path="10.4 微生物数据完整注释问题.html">
            
                <a href="10.4 微生物数据完整注释问题.html">
            
                    
                    10.4 Full taxonomy annotation
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="Contact.html">
            
                <a href="Contact.html">
            
                    
                    Contact
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >7.1 EMP_filter</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h2 id="71-empfilter">7.1 EMP_filter</h2>
<p>The function of module <code>EMP_filter</code> is very powerful, which can not only filter features and samples according to rowdata and coldata but also filter them according to data analysis results. To facilitate the user&apos;s understanding, the following describes the basic parameters of the module <code>EMP_filter</code>: </p>
<ul>
<li><strong>obj</strong>: Specify the object to be analyzed, either <code>MAE</code> or <code>EMPT</code>.</li>
<li><strong>experiment</strong>: Specify the name of the project to be analyzed (character).</li>
<li><strong>sample_condition</strong>: Specify the threshold conditions for selecting samples.</li>
<li><strong>feature_condition</strong>: Specify the threshold conditions for selecting features.</li>
<li><strong>filterSample</strong>: Specify the names of the samples to be filtered.</li>
<li><strong>filterFeature</strong>: Specify the names of the features to be filtered.</li>
<li><strong>action</strong>: Used in conjunction with parameters <code>filterSample</code> and <code>filterFeature</code>, set to <code>kick</code> or <code>select</code>.</li>
<li><strong>show_info</strong>: Specify the display method of the output results.</li>
</ul>
<div style="background-color: #ffffcc; border: 1px solid #ffcc00; padding: 10px;">
Note: <br>
&#x2460; It is necessary to understand the filtering logic in the module <code>EMP_filter</code>. First, samples and features are filtered based on the conditions specified by the parameters <code>sample_condition</code> and <code>feature_condition</code>. Then, samples and features are selected or kicked based on the parameters <code>filterSample</code> and <code>filterFeature</code>. <br>
&#x2461; If <code>EMP_filter</code> operation does not meet the filtering requirements in once time, the <code>EMP_filter</code> process can be performed multiple times.
</div>


<div style="text-align:center;">   
  <img src="../tutorial_figs/EMP_filter.jpg" style="zoom:50%;"> 
</div>

<h3 id="711-filter-the-data-across-all-the-experiments-in-mae">7.1.1 Filter the data across all the experiments in MAE</h3>
<p>&#x1F3F7;&#xFE0F;<strong>Example 1&#xFF1A;</strong>Screen male subjects older than 30 years from all omics projects.</p>
<pre class="language-"><code class="lang-R">MAE |&gt;
  EMP_filter(sample_condition = Sex == &apos;M&apos; &amp; Age &gt;30)
</code></pre>
<p><img src="../tutorial_figs/MAE_male_30.jpg" alt=""></p>
<p>After filtering, only the samples that meet the conditions that exist in the <code>MAE</code> object, and other analysis modules can be directly used for downstream analysis. For example, users can use the module <code>EMP_coldata_extract</code> to observe the filtered sample.</p>
<pre class="language-"><code class="lang-R">MAE |&gt;
  EMP_filter(sample_condition = Sex == &apos;M&apos; &amp; Age &gt;30) |&gt;
  EMP_coldata_extract()
</code></pre>
<p><img src="../tutorial_figs/MAE_male_30_col.jpg" alt=""></p>
<p>&#x1F3F7;&#xFE0F;<strong>Example 2&#xFF1A;</strong>Select the samples without missing values in the sample-related data.</p>
<div style="background-color: #ffffcc; border: 1px solid #ffcc00; padding: 10px;">
Note&#xFF1A;<br>
The module <code>EMP_filter</code> inherits <code>the filter</code>  syntax from the <code>dplyr</code> package, so  the tidy syntax for filtering is avaviable.
</div>

<pre class="language-"><code class="lang-R">MAE |&gt;
  EMP_filter(sample_condition = if_all(everything(),~ !is.na(.)))
</code></pre>
<p>&#x1F3F7;&#xFE0F;<strong>Example 3&#xFF1A;</strong>Select the samples whose at least one of the PHQ-9 or GAD-7 scores is greater than 5.</p>
<pre class="language-"><code class="lang-R">MAE |&gt;
  EMP_filter(sample_condition = if_any(c(PHQ9,GAD7),~. &gt; 5))
</code></pre>
<h3 id="712-filter-samples-and-features-in-single-omics-data">7.1.2 Filter samples and features in single omics data</h3>
<p>&#x1F3F7;&#xFE0F;<strong>Example 1&#xFF1A;</strong>Filter samples based on raw data.</p>
<p>Select male samples over the age of 30 from the data and exclude the sample P70597.</p>
<div style="background-color: #ffffcc; border: 1px solid #ffcc00; padding: 10px;">
Note&#xFF1A;<br>
The parameter <code>action</code>  is used only for the parameters <code>filterSample</code> and <code>filterFeature</code>.<br>
</div>

<pre class="language-"><code class="lang-R">MAE |&gt;
  EMP_assay_extract(&apos;host_gene&apos;) |&gt;
  EMP_filter(Sex == &apos;M&apos; &amp; Age &gt;30,filterSample = &apos;P70597&apos;,action = &apos;kick&apos;)
</code></pre>
<p><img src="../tutorial_figs/host_gene_male_30.jpg" style="zoom:100%;"></p>
<p>&#x1F3F7;&#xFE0F;<strong>Example 2&#xFF1A;</strong>Filter samples based on previous alpha analysis result. Select samples with the Shannon value greater than 2.</p>
<pre class="language-"><code class="lang-R">MAE |&gt;
  EMP_assay_extract(&apos;taxonomy&apos;) |&gt;
  EMP_alpha_analysis() |&gt;
  EMP_filter(shannon &gt; 2)
</code></pre>
<p><img src="../tutorial_figs/tax_alpha_filter.jpg" alt=""></p>
<p>&#x1F3F7;&#xFE0F;<strong>Example 3&#xFF1A;</strong>Filter samples based on previous difference analysis result. Select feature with the adjust P value less than 0.05.</p>
<pre class="language-"><code class="lang-R">MAE |&gt;
  EMP_assay_extract(&apos;host_gene&apos;) |&gt;
  EMP_diff_analysis(method = &apos;DESeq2&apos;,.formula = ~Group,p.adjust = &apos;BH&apos;) |&gt;
  EMP_filter(feature_condition = BH &lt; 0.05)
</code></pre>
<p><img src="../tutorial_figs/host_gene_diff_filter.jpg" alt=""></p>
<p>&#x1F3F7;&#xFE0F;<strong>Example 4&#xFF1A;</strong> Filter samples and features in multiple conditions and times.</p>
<p>Extract the assay of  <code>geno_ec</code>. Perform WGCNA  analysis followed by DESeq2 difference analysis, and then filter the data based on the following criteria:</p>
<ul>
<li>Samples older than 30 years;</li>
<li>Core genes identified by edgeR;</li>
<li>Genes from the WGCNA analysis that are associated significantly with BMI;</li>
<li>Genes with a p-value less than 0.05 in the difference analysis.</li>
</ul>
<pre class="language-"><code class="lang-R">MAE |&gt;
  EMP_assay_extract(&apos;geno_ec&apos;)  |&gt; 
  EMP_identify_assay(method = &apos;edgeR&apos;,estimate_group = &apos;Group&apos;) |&gt;
  EMP_WGCNA_cluster_analysis(RsquaredCut = 0.85,mergeCutHeight=0.4)  |&gt;
  EMP_WGCNA_cor_analysis(coldata_to_assay = c(&apos;BMI&apos;,&apos;PHQ9&apos;,&apos;GAD7&apos;,&apos;HAMD&apos;,&apos;SAS&apos;,&apos;SDS&apos;),
                         method=&apos;spearman&apos;) |&gt;
  EMP_heatmap_plot() |&gt; # This step can help find the interesting module
  EMP_diff_analysis(method = &apos;DESeq2&apos;,.formula = ~Group) |&gt;
  EMP_filter(sample_condition = Age &gt;30,
             feature_condition = WGCNA_color == &apos;black&apos; &amp; pvalue &lt; 0.05)
</code></pre>
<p><img src="../tutorial_figs/ec_WGCNA_diff_muti_filter.jpg" style="zoom:50%;"></p>
<h3 id="713-regarding-the-removal-of-data-analysis-results-after-filtering">7.1.3 Regarding the removal of data analysis results after filtering</h3>
<p>In the analysis workflow in the EasyMultiProfiler package, the analysis results are automatically stored in objects for the module <code>EMP_filter</code>. However, once the screening is complete, the previously stored results may no longer be right and are therefore automatically cleared away (e.g., the results of the difference analysis and alpha diversity analysis are stored in the container, and then some samples are excluded based on the BMI value). At this stage, the existing difference analysis results are automatically cleared because they are no longer right; The alpha diversity results are not affected by the sample change and will continue to be stored in the object for the next screening). The EasyMultiProfiler package already automates this process and will alert the user in red text that the action has been performed.</p>
<h3 id="714-regarding-the-display-of-filtered-data">7.1.4 Regarding the display of filtered data</h3>
<p>In the analysis workflow of the EasyMultiProfiler package, after filtering with the module <code>EMP_filter</code>, the output will by default retain the display results from the previous analysis module. For example, if the previous module performed alpha diversity calculations, and <code>EMP_filter</code> is used to filter based on the Age&gt;30 condition, the <code>EMP_filter</code> output will continue to display the filtered results from the previous module. If the result is cleared due to changes in samples or features (as detailed in section 7.1.3), the output will instead reflect the current state of the dataset assay.</p>
<h3 id="715-regarding-filtered-data-extraction">7.1.5 Regarding filtered Data Extraction</h3>
<p>In the module <code>EMP_filter</code>, the parameter <code>action</code> is used only to filter with parameters <code>filterSample</code> and <code>filterFeature</code>. If users want to extract the assay data after filtering,  it is a good idea to use the module <code>EMP_assay_extract</code> after the module <code>EMP_filter</code>. </p>
<p>&#x1F3F7;&#xFE0F;<strong>Example&#xFF1A;</strong>Extract assay after filtering.</p>
<pre class="language-"><code class="lang-R">MAE |&gt;
  EMP_assay_extract(&apos;host_gene&apos;) |&gt;
  EMP_filter(Sex == &apos;M&apos; &amp; Age &gt;30,filterSample = &apos;P70597&apos;,action = &apos;kick&apos;) |&gt;
  EMP_assay_extract(action = &apos;get&apos;)
</code></pre>
<footer class="page-footer"><span class="copyright">Copyright &#xA9; 382983280@qq.com 2024 all right reserved&#xFF0C;powered by Gitbook</span><span class="footer-modification">&#x66F4;&#x65B0;&#x65F6;&#x95F4;&#xFF1A;
2024-08-31 18:58:42
</span></footer>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="7 data support.html" class="navigation navigation-prev " aria-label="Previous page: Chapter 7 Data support">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="7.2 数据历史 EMP_history.html" class="navigation navigation-next " aria-label="Next page: 7.2 EMP_history">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"7.1 EMP_filter","level":"1.1.7.1","depth":3,"next":{"title":"7.2 EMP_history","level":"1.1.7.2","depth":3,"path":"MD/7.2 数据历史 EMP_history.md","ref":"MD/7.2 数据历史 EMP_history.md","articles":[]},"previous":{"title":"Chapter 7 Data support","level":"1.1.7","depth":2,"path":"MD/7 data support.md","ref":"MD/7 data support.md","articles":[{"title":"7.1 EMP_filter","level":"1.1.7.1","depth":3,"path":"MD/7.1 数据筛选 data_filter.md","ref":"MD/7.1 数据筛选 data_filter.md","articles":[]},{"title":"7.2 EMP_history","level":"1.1.7.2","depth":3,"path":"MD/7.2 数据历史 EMP_history.md","ref":"MD/7.2 数据历史 EMP_history.md","articles":[]},{"title":"7.3 EMP_result","level":"1.1.7.3","depth":3,"path":"MD/7.3 数据结果提取和注入 EMP_result.md","ref":"MD/7.3 数据结果提取和注入 EMP_result.md","articles":[]},{"title":"7.4 EMP_summary","level":"1.1.7.4","depth":3,"path":"MD/7.4 数据概览 EMP_summary.md","ref":"MD/7.4 数据概览 EMP_summary.md","articles":[]},{"title":"7.5 EMP_taxonomy_import","level":"1.1.7.5","depth":3,"path":"MD/7.5 物种数据导入 EMP_taxonomy_import.md","ref":"MD/7.5 物种数据导入 EMP_taxonomy_import.md","articles":[]},{"title":"7.6 EMP_function_import","level":"1.1.7.6","depth":3,"path":"MD/7.6 功能数据导入 EMP_function_import.md","ref":"MD/7.6 功能数据导入 EMP_function_import.md","articles":[]},{"title":"7.7 EMP_normal_import","level":"1.1.7.7","depth":3,"path":"MD/7.7 标准数据导入 EMP_normal_import.md","ref":"MD/7.7 标准数据导入 EMP_normal_import.md","articles":[]},{"title":"7.8 EMP_easy_import","level":"1.1.7.8","depth":3,"path":"MD/7.8 快捷数据导入 EMP_easy_import.md","ref":"MD/7.8 快捷数据导入 EMP_easy_import.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["code","pageview-count","tbfed-pagefooter","favicon","-highlight","prism","google-tongji-with-multiple-channel","search-pro","expandable-chapters","hide-element","back-to-top-button","splitter","auto-scroll-table","-lunr","-search","-sharing","sharing-plus","chapter-fold","livereload"],"styles":{"website":"assets/styles/website.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"Copyright © 382983280@qq.com 2024","modify_label":"更新时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"chapter-fold":{},"prism":{"css":["prismjs/themes/prism-tomorrow.css"]},"livereload":{},"splitter":{},"google-tongji-with-multiple-channel":{"multipleChannelConfig":{},"url":"https://www.googletagmanager.com/gtag/js","token":"G-YE9M3Z1JB4"},"search-pro":{},"sharing-plus":{"qq":false,"all":["facebook","google","twitter","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":true,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"auto-scroll-table":{},"code":{"copyButtons":true},"hide-element":{"elements":[".gitbook-link"]},"fontsettings":{"theme":"white","family":"sans","size":2},"favicon":{"shortcut":"assets/favicon.ico","bookmark":"assets/favicon.ico","appleTouch":"assets/favicon.ico","appleTouchMore":{"120x120":"assets/favicon.ico","180x180":"assets/favicon.ico"}},"back-to-top-button":{},"pageview-count":{},"sharing":{"all":["facebook","google","linkedin","twitter","weibo","qq"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"expandable-chapters":{}},"theme":"default","author":"Bingdong Liu","pdf":{"pageBreaksBefore":"/","headerTemplate":null,"paperSize":"a4","margin":{"right":62,"left":62,"top":36,"bottom":36},"fontSize":12,"fontFamily":"Arial","footerTemplate":null,"chapterMark":"pagebreak","pageNumbers":true},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"isbn":"","variables":{},"title":"Bingdong Liu","language":"zh-hans","links":{"sharing":{"all":true,"facebook":true,"google":true,"twitter":true,"weibo":true},"sidebar":{"EasyMultiProfiler":"https://github.com/liubingdong/EasyMultiProfiler"}},"gitbook":"*","description":"EasyMultiProfiler.","extension":null},"file":{"path":"MD/7.1 数据筛选 data_filter.md","mtime":"2024-08-31T10:58:42.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2024-09-09T12:45:22.153Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-pageview-count/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-google-tongji-with-multiple-channel/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-hide-element/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-back-to-top-button/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-auto-scroll-table/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing-plus/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-chapter-fold/chapter-fold.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

